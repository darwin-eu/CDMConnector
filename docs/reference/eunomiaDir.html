<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a copy of an example OMOP CDM dataset — eunomiaDir • CDMConnector</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a copy of an example OMOP CDM dataset — eunomiaDir"><meta name="description" content="Eunomia is an OHDSI project that provides several example OMOP CDM datasets for testing and development.
This function creates a copy of a Eunomia database in duckdb and returns
the path to the new database file. If the dataset does not yet exist on the user's computer it
will attempt to download the source data to the the path defined by the EUNOMIA_DATA_FOLDER environment variable."><meta property="og:description" content="Eunomia is an OHDSI project that provides several example OMOP CDM datasets for testing and development.
This function creates a copy of a Eunomia database in duckdb and returns
the path to the new database file. If the dataset does not yet exist on the user's computer it
will attempt to download the source data to the the path defined by the EUNOMIA_DATA_FOLDER environment variable."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CDMConnector</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a01_getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/a02_cohorts.html">Working with cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a03_dbplyr.html">CDMConnector and dbplyr</a></li>
    <li><a class="dropdown-item" href="../articles/a04_DBI_connection_examples.html">DBI connection examples</a></li>
    <li><a class="dropdown-item" href="../articles/a05_cdm_reference_backends.html">CDM reference backends</a></li>
    <li><a class="dropdown-item" href="../articles/a06_using_cdm_attributes.html">Using CDM attributes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/darwin-eu/CDMConnector/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a copy of an example OMOP CDM dataset</h1>
      <small class="dont-index">Source: <a href="https://github.com/darwin-eu/CDMConnector/blob/HEAD/R/Eunomia.R" class="external-link"><code>R/Eunomia.R</code></a></small>
      <div class="d-none name"><code>eunomiaDir.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Eunomia is an OHDSI project that provides several example OMOP CDM datasets for testing and development.
This function creates a copy of a Eunomia database in <a href="https://duckdb.org/" class="external-link">duckdb</a> and returns
the path to the new database file. If the dataset does not yet exist on the user's computer it
will attempt to download the source data to the the path defined by the EUNOMIA_DATA_FOLDER environment variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">eunomiaDir</span><span class="op">(</span></span>
<span>  datasetName <span class="op">=</span> <span class="st">"GiBleed"</span>,</span>
<span>  cdmVersion <span class="op">=</span> <span class="st">"5.3"</span>,</span>
<span>  databaseFile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".duckdb"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">eunomiaDir</span><span class="op">(</span></span>
<span>  dataset_name <span class="op">=</span> <span class="st">"GiBleed"</span>,</span>
<span>  cdm_version <span class="op">=</span> <span class="st">"5.3"</span>,</span>
<span>  database_file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".duckdb"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-datasetname">datasetName<a class="anchor" aria-label="anchor" href="#arg-datasetname"></a></dt>
<dd><p>One of "GiBleed" (default),
"synthea-allergies-10k",
"synthea-anemia-10k",
"synthea-breast_cancer-10k",
"synthea-contraceptives-10k",
"synthea-covid19-10k",
"synthea-covid19-200k",
"synthea-dermatitis-10k",
"synthea-heart-10k",
"synthea-hiv-10k",
"synthea-lung_cancer-10k",
"synthea-medications-10k",
"synthea-metabolic_syndrome-10k",
"synthea-opioid_addiction-10k",
"synthea-rheumatoid_arthritis-10k",
"synthea-snf-10k",
"synthea-surgery-10k",
"synthea-total_joint_replacement-10k",
"synthea-veteran_prostate_cancer-10k",
"synthea-veterans-10k",
"synthea-weight_loss-10k",
"empty_cdm",
"synpuf-1k"</p></dd>


<dt id="arg-cdmversion-cdm-version">cdmVersion, cdm_version<a class="anchor" aria-label="anchor" href="#arg-cdmversion-cdm-version"></a></dt>
<dd><p>The OMOP CDM version. Must be "5.3" or "5.4".</p></dd>


<dt id="arg-databasefile-database-file">databaseFile, database_file<a class="anchor" aria-label="anchor" href="#arg-databasefile-database-file"></a></dt>
<dd><p>The full path to the new copy of the example CDM dataset.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The file path to the new Eunomia dataset copy</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Most of the Eunomia datasets available in CDMConnector are from the Synthea project. Synthea is an open-source
synthetic patient generator that models the medical history of synthetic patients. The Synthea datasets are
generated using the Synthea tool and then converted to the OMOP CDM format using the OHDSI
ETL-Synthea project <a href="https://ohdsi.github.io/ETL-Synthea/" class="external-link">https://ohdsi.github.io/ETL-Synthea/</a>. Currently the synthea datasets
are only available in the OMOP CDM v5.3 format. See <a href="https://synthetichealth.github.io/synthea/" class="external-link">https://synthetichealth.github.io/synthea/</a>
for details on the Synthea project.</p>
<p>In addition to Synthea, the Eunomia project provides the CMS Synthetic Public Use Files (SynPUFs) in both
5.3 and 5.4 OMOP CDM formats. This data is synthetic US Medicare claims data mapped to OMOP CDM format.
The OMOP CDM has a set of optional metadata tables, called Achilles tables, that
include pre-computed analytics about the entire dataset such as record and person counts.
The Eunomia Synpuf datasets include the Achilles tables.</p>
<p>Eunomia also provides empty cdms that can be used as a starting point for creating a new example CDM.
This is useful for creating test data for studies or analytic packages.
The empty CDM includes the vocabulary tables and all OMOP CDM tables but
the clinical tables are empty and need to be populated with data. For additional information on
creating small test CDM datasets see <a href="https://ohdsi.github.io/omock/" class="external-link">https://ohdsi.github.io/omock/</a> and
<a href="https://darwin-eu.github.io/TestGenerator/" class="external-link">https://darwin-eu.github.io/TestGenerator/</a>.</p>
<p>To contribute synthetic observational health data to the Eunomia project please
open an issue at <a href="https://github.com/OHDSI/Eunomia/issues/" class="external-link">https://github.com/OHDSI/Eunomia/issues/</a></p>
<p>Setup: To use the <code>eunomiaDir</code> function please set the <code>EUNOMIA_DATA_FOLDER</code> in your .Renviron file
to a folder on your computer where the datasets will be downloaded to. This file can
be opened by calling <code><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">usethis::edit_r_environ()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># The defaults GiBleed dataset is a small dataset that is useful for testing</span></span></span>
<span class="r-in"><span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://darwin-eu.github.io/CDMConnector/" class="external-link">CDMConnector</a></span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html" class="external-link">duckdb</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">eunomiaDir</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="cdmFromCon.html">cdmFromCon</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"main"</span>, <span class="st">"main"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="cdmDisconnect.html">cdmDisconnect</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># Synpuf datasets include the Achilles tables</span></span></span>
<span class="r-in"><span> <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html" class="external-link">duckdb</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">eunomiaDir</span><span class="op">(</span><span class="st">"synpuf-1k"</span>, <span class="st">"5.3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="cdmFromCon.html">cdmFromCon</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"main"</span>, <span class="st">"main"</span>, achillesSchema <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="cdmDisconnect.html">cdmDisconnect</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="co"># Currently the only 5.4 dataset is synpuf-1k</span></span></span>
<span class="r-in"><span> <span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html" class="external-link">duckdb</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu">eunomiaDir</span><span class="op">(</span><span class="st">"synpuf-1k"</span>, <span class="st">"5.4"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="cdmFromCon.html">cdmFromCon</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"main"</span>, <span class="st">"main"</span>, achillesSchema <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="cdmDisconnect.html">cdmDisconnect</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adam Black, Artem Gorbachev, Edward Burn, Marti Catala Sabate.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

